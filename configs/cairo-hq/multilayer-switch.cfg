!
! Cairo HQ Multilayer Switch Configuration
! Responsible for inter-VLAN routing and VLAN management
!
version 15.2
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname Cairo-HQ-Switch
!
boot-start-marker
boot-end-marker
!
enable secret 5 $1$mERr$9cTjUIEqNGurQv69kKH5V/
!
! Global configuration
ip routing
ip domain-name netinfra.local
!
! VLAN Configuration
vlan 10
 name Management
vlan 20
 name Sales
vlan 30
 name IT
vlan 40
 name Finance
!
! VLAN Interfaces (SVI) for inter-VLAN routing
interface Vlan10
 description Management Network
 ip address 192.168.10.1 255.255.255.0
 ip helper-address 10.2.2.2
 no shutdown
!
interface Vlan20
 description Sales Department
 ip address 192.168.20.1 255.255.255.0
 ip helper-address 10.2.2.2
 ip access-group SALES_WEB_BLOCK out
 no shutdown
!
interface Vlan30
 description IT Department
 ip address 192.168.30.1 255.255.255.0
 ip helper-address 10.2.2.2
 no shutdown
!
interface Vlan40
 description Finance Department
 ip address 192.168.40.1 255.255.255.0
 ip helper-address 10.2.2.2
 no shutdown
!
! WAN Interface to Cloud
interface GigabitEthernet0/1
 description WAN Link to Cloud
 ip address 10.1.1.1 255.255.255.252
 no shutdown
!
! Access ports configuration (examples)
interface FastEthernet0/1
 description Management Access
 switchport mode access
 switchport access vlan 10
 spanning-tree portfast
!
interface FastEthernet0/2
 description Sales Access
 switchport mode access
 switchport access vlan 20
 spanning-tree portfast
!
interface FastEthernet0/3
 description IT Access
 switchport mode access
 switchport access vlan 30
 spanning-tree portfast
!
interface FastEthernet0/4
 description Finance Access
 switchport mode access
 switchport access vlan 40
 spanning-tree portfast
!
! EIGRP Configuration
router eigrp 100
 network 192.168.10.0 0.0.0.255
 network 192.168.20.0 0.0.0.255
 network 192.168.30.0 0.0.0.255
 network 192.168.40.0 0.0.0.255
 network 10.1.1.0 0.0.0.3
 auto-summary
!
! Access Control Lists
! Block VLAN10 (Management) from accessing VLAN40 (Finance)
ip access-list extended MGMT_FINANCE_BLOCK
 deny ip 192.168.10.0 0.0.0.255 192.168.40.0 0.0.0.255
 permit ip any any
!
! Block VLAN20 (Sales) from accessing web server at Luxor
ip access-list extended SALES_WEB_BLOCK
 deny ip 192.168.20.0 0.0.0.255 host 10.2.2.10
 permit ip any any
!
! Apply ACL to Management VLAN
interface Vlan10
 ip access-group MGMT_FINANCE_BLOCK out
!
! SSH Configuration
ip ssh version 2
username admin privilege 15 secret 5 $1$mERr$9cTjUIEqNGurQv69kKH5V/
!
line con 0
 logging synchronous
line vty 0 4
 login local
 transport input ssh
!
end